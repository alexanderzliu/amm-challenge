[
  {
    "id": 1,
    "name": "AdaptiveDynamic v1",
    "parent_id": null,
    "date": "2026-02-10",
    "hypothesis": "Dual-signal volatility tracking (price EMA + trade size EMA) with additive fee adjustment outperforms fixed fees",
    "variables_changed": [
      "initial_design"
    ],
    "verdict": "confirmed_but_superseded",
    "insights": [
      "Dynamic fees can beat vanilla baseline (~347 vs vanilla 250-350)",
      "Dual EMA signals dilute the stronger signal \u2014 net negative vs single signal",
      "Decay at 20% per trade may be too slow, keeping fees elevated unnecessarily",
      "Combined vol signal averaging two EMAs adds complexity without benefit"
    ],
    "params": {
      "base_fee_bps": 20,
      "initial_fee_bps": 25,
      "vol_scaling": "volSignal * 2/5",
      "spike_large_bps": 15,
      "spike_medium_bps": 8,
      "spike_threshold_large": 0.02,
      "spike_threshold_medium": 0.01,
      "price_ema_alpha": 0.05,
      "trade_size_ema_alpha": 0.1,
      "rise_speed": "1/2",
      "decay_speed": "1/5",
      "fee_floor_bps": 8,
      "symmetric": true
    },
    "results": {
      "edge": 346.87,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "vol-scaling",
      "dual-signal",
      "additive",
      "symmetric"
    ]
  },
  {
    "id": 2,
    "name": "PropVol",
    "parent_id": 1,
    "date": "2026-02-10",
    "hypothesis": "Fee proportional to realized volatility (fee = k * sigma) with single EMA outperforms dual-signal additive approach",
    "variables_changed": [
      "fee_formula",
      "num_signals",
      "ema_alpha",
      "fee_floor",
      "spike_magnitudes",
      "rise_speed",
      "decay_speed",
      "vol_seed"
    ],
    "verdict": "confirmed",
    "insights": [
      "Simpler single-signal approach (price EMA only) outperforms dual-signal by +8%",
      "Linear fee-proportional-to-sigma is theoretically grounded and works empirically",
      "Wider dynamic range (15-90 bps) helps: aggressive undercutting in calm + strong defense in volatile",
      "Faster EMA (alpha=0.1 vs 0.05) reacts to regime changes quicker",
      "Seeding EMA at 1e15 (~0.1%) gives stable 30 bps start instead of floor"
    ],
    "params": {
      "vol_multiplier": 3,
      "ema_alpha": 0.1,
      "fee_floor_bps": 15,
      "spike_large_bps": 20,
      "spike_medium_bps": 10,
      "spike_threshold_large": 0.02,
      "spike_threshold_medium": 0.01,
      "rise_speed": "2/3",
      "decay_speed": "1/4",
      "initial_ema_vol": "1e15",
      "symmetric": true
    },
    "results": {
      "edge": 374.54,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "vol-scaling",
      "single-ema",
      "proportional",
      "symmetric"
    ]
  },
  {
    "id": 3,
    "name": "DirSkew",
    "parent_id": 2,
    "date": "2026-02-10",
    "hypothesis": "Directional asymmetric fees (protect trending side, discount safe side) outperform symmetric PropVol",
    "variables_changed": [
      "fee_symmetry",
      "direction_ema",
      "fee_floor"
    ],
    "verdict": "rejected",
    "insights": [
      "Directional skew had zero meaningful impact (374.21 vs 374.54)",
      "GBM random walk has no persistent trends \u2014 direction EMA stays near neutral",
      "Router neutralizes asymmetric fee benefit: retail is 50/50 buy/sell",
      "Added complexity (5 slots vs 3) for no gain \u2014 confirms simpler is better"
    ],
    "params": {
      "vol_multiplier": 3,
      "ema_alpha": 0.1,
      "fee_floor_bps": 10,
      "spike_large_bps": 20,
      "spike_medium_bps": 10,
      "spike_threshold_large": 0.02,
      "spike_threshold_medium": 0.01,
      "rise_speed": "2/3",
      "decay_speed": "1/4",
      "initial_ema_vol": "1e15",
      "symmetric": false,
      "direction_ema_alpha": 0.05,
      "max_skew_bps": 12
    },
    "results": {
      "edge": 374.21,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "vol-scaling",
      "single-ema",
      "proportional",
      "asymmetric",
      "directional"
    ]
  },
  {
    "id": 4,
    "name": "Fixed Fee Sweep",
    "parent_id": 2,
    "date": "2026-02-10",
    "hypothesis": "A well-chosen fixed fee may outperform PropVol dynamic fees \u2014 need to find optimal fixed point to establish baseline",
    "variables_changed": [
      "fee_type",
      "fee_level"
    ],
    "verdict": "confirmed",
    "insights": [
      "Optimal fixed fee is ~75-80 bps (edge ~385 at 500 sims), NOT near vanilla's 30 bps",
      "PropVol at 374 was sitting in a suboptimal fee region (15-30 bps most of the time)",
      "Arb protection from high fees (quadratic benefit) far outweighs retail volume lost to vanilla",
      "Retail routing is proportional (not winner-take-all) \u2014 we still get some retail even at 80 bps",
      "Arb is independent per AMM \u2014 wider no-arb band from high fees directly reduces losses",
      "Fixed fee curve: 25\u2192330, 30\u2192352, 40\u2192368, 50\u2192380, 60\u2192387, 70\u2192391, 80\u2192392, 90\u2192390, 100\u2192386"
    ],
    "params": {
      "fee_type": "fixed",
      "fee_bps_sweep": [
        25,
        28,
        30,
        35,
        40,
        45,
        50,
        55,
        60,
        70,
        80,
        90,
        100
      ],
      "best_fixed_bps": 80,
      "symmetric": true
    },
    "results": {
      "edge": 384.97,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "fixed-fee",
      "baseline",
      "sweep",
      "paradigm-shift"
    ]
  },
  {
    "id": 5,
    "name": "PropVol No Spikes",
    "parent_id": 2,
    "date": "2026-02-10",
    "hypothesis": "Trade-size spike logic in PropVol may hurt more than it helps \u2014 isolate its contribution",
    "variables_changed": [
      "spike_removal"
    ],
    "verdict": "rejected",
    "insights": [
      "Spikes help slightly: 374.54 with spikes vs 370.55 without (+4 edge)",
      "Spike mechanism provides value even in the low-fee PropVol regime",
      "But both variants are far below optimal fixed 80 bps (385)"
    ],
    "params": {
      "vol_multiplier": 3,
      "ema_alpha": 0.1,
      "fee_floor_bps": 15,
      "spike_large_bps": 0,
      "spike_medium_bps": 0,
      "rise_speed": "2/3",
      "decay_speed": "1/4",
      "symmetric": true
    },
    "results": {
      "edge": 370.55,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "vol-scaling",
      "ablation",
      "no-spikes"
    ]
  },
  {
    "id": 6,
    "name": "SpikeOnly80",
    "parent_id": 4,
    "date": "2026-02-10",
    "hypothesis": "Fixed 80 bps base with spike-up on large trades can beat pure fixed fee by adding arb protection when it matters most",
    "variables_changed": [
      "strategy_paradigm",
      "base_fee",
      "spike_mechanism"
    ],
    "verdict": "confirmed",
    "insights": [
      "SpikeOnly80 (398.55) beats Fixed80 (385) by +14 edge \u2014 spikes add value on top of high base",
      "Paradigm shift: abandon vol-tracking EMA, use trade-size-only reactive spikes",
      "Large trades are predominantly arb \u2014 spiking fees after them protects against follow-up arbs",
      "Base fee insensitive in 70-80 bps range (70\u2192399, 75\u2192399, 80\u2192399)"
    ],
    "params": {
      "base_fee_bps": 80,
      "spike_large_bps": 40,
      "spike_medium_bps": 20,
      "spike_threshold_large": 0.02,
      "spike_threshold_medium": 0.01,
      "rise_speed": "2/3",
      "decay_speed": "1/6",
      "symmetric": true
    },
    "results": {
      "edge": 398.55,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "high-base",
      "trade-size-reactive"
    ]
  },
  {
    "id": 7,
    "name": "SpikeOnly75-4T",
    "parent_id": 6,
    "date": "2026-02-10",
    "hypothesis": "More spike tiers with larger magnitudes improve arb protection \u2014 bigger spikes = more edge",
    "variables_changed": [
      "num_tiers",
      "spike_magnitudes",
      "base_fee",
      "decay_speed"
    ],
    "verdict": "confirmed",
    "insights": [
      "Multi-tier spikes (422) beat 2-tier (399) by +23 edge \u2014 granularity matters",
      "Bigger spike magnitudes help: +40/+20 bps \u2192 +300/+200/+150/+75/+25 bps",
      "Faster decay (1/4 vs 1/6) is better \u2014 spike should be short-lived",
      "Base 75 bps slightly better than 80 (both ~399 in 2-tier, 75 chosen for 4-tier)",
      "Progression: 2-tier +40/+20\u2192399, 3-tier +200/+150/+75\u2192417, 4-tier +300/+200/+150/+75/+25\u2192422"
    ],
    "params": {
      "base_fee_bps": 75,
      "num_tiers": 5,
      "spike_tiers_bps": [
        25,
        75,
        150,
        200,
        300
      ],
      "spike_thresholds": [
        0.005,
        0.01,
        0.02,
        0.03,
        0.05
      ],
      "rise_speed": "2/3",
      "decay_speed": "1/4",
      "symmetric": true
    },
    "results": {
      "edge": 422.12,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "high-base",
      "multi-tier",
      "aggressive-spikes"
    ]
  },
  {
    "id": 8,
    "name": "ContSpike75",
    "parent_id": 7,
    "date": "2026-02-10",
    "hypothesis": "Continuous spike proportional to trade size outperforms discrete tiers \u2014 eliminates arbitrary thresholds and provides smoother fee response",
    "variables_changed": [
      "spike_type",
      "spike_multiplier",
      "decay_speed"
    ],
    "verdict": "confirmed",
    "insights": [
      "Continuous spike (434) beats multi-tier (422) by +12 edge \u2014 smoother is better",
      "Optimal spike multiplier ~1-1.25x: 0.5x\u2192418, 0.75x\u2192427, 1x\u2192431, 1.25x\u2192432, 1.5x\u2192429",
      "Faster decay (1/3) beats slower (1/4\u2192432, 1/8\u2192424) \u2014 spikes should be short-lived",
      "Elegantly simple: spike = tradeRatio * 5/4, no threshold tuning needed",
      "Strategy is now just 3 params: base_fee, spike_mult, decay_speed"
    ],
    "params": {
      "base_fee_bps": 75,
      "spike_type": "continuous_linear",
      "spike_multiplier": 1.25,
      "rise_speed": "2/3",
      "decay_speed": "1/3",
      "symmetric": true
    },
    "results": {
      "edge": 434.01,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "high-base",
      "continuous"
    ]
  },
  {
    "id": 9,
    "name": "LinQuadSpike",
    "parent_id": 8,
    "date": "2026-02-10",
    "hypothesis": "Hybrid linear+quadratic spike penalizes large trades superlinearly while still reacting to small trades \u2014 better than pure linear or pure quadratic",
    "variables_changed": [
      "spike_formula",
      "linear_coeff",
      "quad_coeff"
    ],
    "verdict": "confirmed",
    "insights": [
      "Lin+quad (445) beats pure linear (434) and pure quadratic (427)",
      "Pure quadratic underreacts to small trades; pure linear underreacts to large trades",
      "Optimal coefficients: linear=0.75, quad=25 (q sweep: 15\u2192441, 25\u2192442, 50\u2192438, 100\u2192392)",
      "Linear coeff sweep: 0.5\u2192443, 0.75\u2192445, 1.0\u2192442 \u2014 moderate linear + small quad is ideal"
    ],
    "params": {
      "base_fee_bps": 75,
      "spike_formula": "tradeRatio * 0.75 + tradeRatio^2 * 25",
      "linear_coeff": 0.75,
      "quad_coeff": 25,
      "rise_speed": "2/3",
      "decay_speed": "1/3",
      "symmetric": true
    },
    "results": {
      "edge": 444.6,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "lin-quad",
      "continuous"
    ]
  },
  {
    "id": 10,
    "name": "LinQuad-LowBase",
    "parent_id": 9,
    "date": "2026-02-10",
    "hypothesis": "With strong lin+quad spikes handling arb protection, the optimal base fee drops below 75 bps \u2014 spikes substitute for high fixed base",
    "variables_changed": [
      "base_fee"
    ],
    "verdict": "confirmed",
    "insights": [
      "Optimal base drops to 30-40 bps with lin+quad spikes (vs 75-80 for pure fixed)",
      "Base sweep: 20\u2192456, 30\u2192464, 35\u2192464, 40\u2192463, 50\u2192461, 60\u2192456, 75\u2192445",
      "Spikes handle arb protection dynamically, so base can be low to capture more retail",
      "This reverses the exp 004 finding: with good-enough spikes, low base IS optimal",
      "Flat plateau at 30-40 bps \u2014 not very sensitive in that range"
    ],
    "params": {
      "base_fee_bps": 30,
      "spike_formula": "tradeRatio * 0.75 + tradeRatio^2 * 25",
      "linear_coeff": 0.75,
      "quad_coeff": 25,
      "rise_speed": "2/3",
      "decay_speed": "1/3",
      "symmetric": true
    },
    "results": {
      "edge": 463.82,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "lin-quad",
      "low-base",
      "base-sweep"
    ]
  },
  {
    "id": 11,
    "name": "LinQuad-InstantRise",
    "parent_id": 10,
    "date": "2026-02-10",
    "hypothesis": "Instant fee rise (no smoothing upward) + slow decay maximizes arb protection \u2014 react instantly to threats, relax gradually",
    "variables_changed": [
      "rise_speed",
      "decay_speed"
    ],
    "verdict": "confirmed",
    "insights": [
      "Instant rise (479) beats 9/10 rise (477) beats 3/4 rise (470) beats 2/3 rise (464)",
      "Decay sweep with instant rise: 1/3\u2192464, 1/4\u2192479, 1/5\u2192479, 1/6\u2192479, 1/10\u2192466",
      "Optimal decay is 1/4 to 1/6 \u2014 not very sensitive in this range",
      "No smoothing at all (instant both ways) is terrible (396) \u2014 memory/persistence matters",
      "Asymmetric smoothing is key: instant up, slow down"
    ],
    "params": {
      "base_fee_bps": 30,
      "spike_formula": "tradeRatio * 0.75 + tradeRatio^2 * 25",
      "linear_coeff": 0.75,
      "quad_coeff": 25,
      "rise_speed": "instant",
      "decay_speed": "1/5",
      "symmetric": true
    },
    "results": {
      "edge": 479.46,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "lin-quad",
      "low-base",
      "instant-rise"
    ]
  },
  {
    "id": 12,
    "name": "LinQuad-MultDecay",
    "parent_id": 11,
    "date": "2026-02-10",
    "hypothesis": "Multiplicative decay (fee * k) is cleaner and potentially better than additive decay (fee - (fee-target)/n)",
    "variables_changed": [
      "decay_type",
      "decay_factor"
    ],
    "verdict": "confirmed",
    "insights": [
      "Mult decay (478 at 500 sims) marginally better than additive (474 at 500 sims)",
      "fee = max(baseFee + spike, prevFee * decay) is simpler than if/else smoothing",
      "Decay factor sweep: 4/5\u2192476, 5/6\u2192478, 6/7\u2192478, 7/8\u2192478, 9/10\u2192477",
      "Sweet spot at 5/6 to 7/8 \u2014 fees decay by 12-17% per trade",
      "Also tested: asymmetric bid/ask (405 \u2014 hurts), vol-regime base (456 \u2014 hurts), arb clustering (474 \u2014 no help), max X/Y ratio (474 \u2014 no help)",
      "Strategy appears converged around 474-478 at 500 sims"
    ],
    "params": {
      "base_fee_bps": 30,
      "spike_formula": "tradeRatio * 0.75 + tradeRatio^2 * 25",
      "linear_coeff": 0.75,
      "quad_coeff": 25,
      "decay_type": "multiplicative",
      "decay_factor": "7/8",
      "symmetric": true
    },
    "results": {
      "edge": 478.29,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "lin-quad",
      "low-base",
      "mult-decay"
    ]
  },
  {
    "id": 13,
    "name": "LinQuad-Tuned",
    "parent_id": 12,
    "date": "2026-02-10",
    "hypothesis": "Extensive grid search can find better base/quad/linear/decay params \u2014 previous best was not fully optimized",
    "variables_changed": [
      "base_fee",
      "quad_coeff",
      "decay_factor"
    ],
    "verdict": "confirmed",
    "insights": [
      "Optimal base drops further from 30 to 24 bps \u2014 more aggressive vanilla undercutting",
      "Optimal quad drops from 30 to 27 \u2014 slightly less aggressive spike",
      "Decay 6/7 is optimal (13/15 gave same result within noise)",
      "Linear 7/8 is optimal (13/15 gave same result within noise)",
      "Base sweep at 500 sims: 22\u2192481.20, 23\u2192481.53, 24\u2192481.68, 25\u2192481.53, 26\u2192480.68, 27\u2192480.18, 30\u2192478.39",
      "Quad sweep at b25: 20\u2192480.79, 25\u2192481.91, 27\u2192482.04, 28\u2192482.03, 30\u2192481.53, 35\u2192479.53",
      "Seeds are deterministic: same 500 seeds give exactly reproducible results",
      "Retail volume share is ~39.5% (vanilla gets 60%) \u2014 room to capture more"
    ],
    "params": {
      "base_fee_bps": 24,
      "spike_formula": "tradeRatio * 7/8 + tradeRatio^2 * 27",
      "linear_coeff": "7/8",
      "quad_coeff": 27,
      "decay_type": "multiplicative",
      "decay_factor": "6/7",
      "symmetric": true
    },
    "results": {
      "edge": 482.17,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": 0.395
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-only",
      "lin-quad",
      "low-base",
      "mult-decay",
      "fine-tuned",
      "current-best"
    ]
  },
  {
    "id": 14,
    "name": "CubicSpike",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Adding a cubic term to the spike formula penalizes very large trades (arbs) even more aggressively than quadratic alone",
    "variables_changed": [
      "spike_formula",
      "cubic_coeff"
    ],
    "verdict": "rejected",
    "insights": [
      "Cubic coeff 500: edge 471 (100 sims) \u2014 hurts by over-penalizing",
      "Cubic coeff 200: edge 479 (100 sims) \u2014 small enough to be no effect",
      "Cubic coeff 50-200 at b24: all 480-482, never beats baseline (500 sims)",
      "Lin+quad already captures the right curvature \u2014 cubic adds nothing"
    ],
    "params": {
      "base_fee_bps": 24,
      "spike_formula": "tradeRatio * 7/8 + tradeRatio^2 * 27 + tradeRatio^3 * C",
      "cubic_coeff_sweep": [
        50,
        100,
        200,
        300,
        500
      ],
      "best_cubic": "none (all hurt or neutral)"
    },
    "results": {
      "edge": 479.04,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-shape",
      "cubic",
      "rejected"
    ]
  },
  {
    "id": 15,
    "name": "RatioVariants",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Using max(amountX/reserveX, amountY/reserveY) or geometric mean instead of Y-only ratio captures trade impact better",
    "variables_changed": [
      "trade_ratio_formula"
    ],
    "verdict": "rejected",
    "insights": [
      "max(X,Y) ratio: 484\u2192478 at 500 sims \u2014 no improvement over Y-only",
      "X-only ratio: 485 at 100 sims \u2014 within noise",
      "avg(X,Y) ratio: 485 at 100 sims \u2014 within noise",
      "Geometric mean sqrt(ratioX*ratioY): 485 at 100 sims \u2014 within noise",
      "Direction-dependent ratio (X for buys, Y for sells): validation parse error, then no improvement",
      "For constant-product AMMs, X and Y ratios are mathematically related \u2014 choosing one over another doesn't matter"
    ],
    "params": {
      "variants_tested": [
        "Y-only",
        "X-only",
        "max(X,Y)",
        "avg(X,Y)",
        "geomean(X,Y)",
        "direction-dependent"
      ],
      "base_fee_bps": 30,
      "n_sims_per_variant": "100-500"
    },
    "results": {
      "edge": 478.0,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "ratio-formula",
      "rejected"
    ]
  },
  {
    "id": 16,
    "name": "SpikeShapeVariants",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Alternative spike shapes (capped, piecewise linear, sqrt) may outperform continuous lin+quad",
    "variables_changed": [
      "spike_shape"
    ],
    "verdict": "rejected",
    "insights": [
      "Spike caps hurt proportionally: cap100\u2192436, cap200\u2192460, cap300\u2192471, cap500\u2192480, cap1000\u2192485",
      "Unbounded spikes are essential \u2014 large arb trades need maximal fee response",
      "Piecewise linear (3 segments): 448-473 \u2014 worse than smooth lin+quad",
      "Higher linear with cap (lin 3/2 cap 300): 453 \u2014 cap dominates and hurts",
      "Sqrt-based spike: 89-367 \u2014 catastrophically over-reactive to small trades",
      "Lin+quad provides the mathematically ideal convex curve shape for this problem"
    ],
    "params": {
      "shapes_tested": [
        "capped at 100-1000 bps",
        "piecewise 3-segment",
        "sqrt",
        "high-linear+cap"
      ],
      "base_fee_bps": 30,
      "n_sims_per_variant": 100
    },
    "results": {
      "edge": 473.0,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-shape",
      "caps",
      "piecewise",
      "sqrt",
      "rejected"
    ]
  },
  {
    "id": 17,
    "name": "RealizedVolSpotPrice",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Tracking realized volatility from spot price changes (reserveY/reserveX) between trades can provide a vol-aware base fee",
    "variables_changed": [
      "vol_tracking",
      "base_fee_formula"
    ],
    "verdict": "rejected",
    "insights": [
      "Catastrophic failure: edge dropped to 294 (vs 482 baseline)",
      "Spot price changes between trades include the fee impact itself \u2014 corrupted signal",
      "Vol bonus pushed fees way too high, losing almost all retail flow",
      "Confirms exp 012 finding: trade price changes are NOT a reliable vol proxy",
      "The fundamental problem: we observe post-trade reserves, not fair price"
    ],
    "params": {
      "vol_ema_alpha": "1/8",
      "vol_scaling": "5x realized vol added to base",
      "base_fee_bps": "30 + volBonus",
      "base_fee_cap_bps": 200
    },
    "results": {
      "edge": 294.18,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "vol-tracking",
      "spot-price",
      "catastrophic",
      "rejected"
    ]
  },
  {
    "id": 18,
    "name": "TimestampFeatures",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Using timestamp to detect trade gaps, trade frequency, and early/late regime switching can improve fee dynamics",
    "variables_changed": [
      "decay_method",
      "trade_frequency",
      "time_switching"
    ],
    "verdict": "rejected",
    "insights": [
      "Gap-aware decay (per-step not per-trade): 463 \u2014 significantly worse, too aggressive",
      "Trade frequency EMA (1/gap as freq signal, adjust base): 482 \u2014 no improvement",
      "Early/late base switching (e.g., base=30 first 100 steps then 24): 482 \u2014 no improvement",
      "All early/late combinations within noise: e30/l24@100\u2192482.15, e20/l24@500\u2192482.07",
      "Timestamp provides no actionable information beyond what trade-size spike already captures"
    ],
    "params": {
      "gap_decay": "fee * 6/7 per step gap (capped at 20)",
      "freq_ema_alpha": "1/8",
      "early_late_configs": [
        "30/24@100",
        "30/24@500",
        "30/24@1000",
        "20/24@500",
        "24/20@5000",
        "15/24@200"
      ]
    },
    "results": {
      "edge": 482.15,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "timestamp",
      "gap-decay",
      "trade-frequency",
      "time-switching",
      "rejected"
    ]
  },
  {
    "id": 19,
    "name": "DecayVariants",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Two-tier decay (slow plateau then fast drop) or adaptive base fee (decaying floor below vanilla) can improve fee dynamics",
    "variables_changed": [
      "decay_structure",
      "base_fee_floor"
    ],
    "verdict": "rejected",
    "insights": [
      "Two-tier decay: best was p8,s9/10,f2/3 at 480 \u2014 within noise of baseline 482",
      "Slow decay (9/10) during plateau, fast (2/3) after \u2014 adds complexity for no gain",
      "Adaptive base fee (30 bps decaying to 5-20 bps floor): all scored 485 identically",
      "Floor never activates in practice \u2014 fee rarely decays below 30 bps before next spike",
      "Sub-base undercutting at 5-25 bps floor: all identical (485) \u2014 confirms floor is unreachable",
      "Decay rate 9/10 at base 30: 481.50 \u2014 very slow decay doesn't help either"
    ],
    "params": {
      "two_tier_configs": "plateau 3/5/8, slow 9/10 or 11/12, fast 1/2 or 3/5 or 2/3",
      "adaptive_base_configs": "floor 5-25 bps, ceiling 25-35 bps, decay 0.5-2 bps/trade",
      "sub_base_floors": [
        5,
        10,
        15,
        20,
        25
      ]
    },
    "results": {
      "edge": 480.29,
      "win_rate": null,
      "n_simulations": 100,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "decay",
      "two-tier",
      "adaptive-base",
      "floor",
      "rejected"
    ]
  },
  {
    "id": 20,
    "name": "SpikeStacking",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Adding spike on top of decayed current fee (additive stacking) or dampened stacking improves arb cluster protection",
    "variables_changed": [
      "spike_application_method"
    ],
    "verdict": "rejected",
    "insights": [
      "Additive stacking (decayedFee + spike): parse error in template, conceptually same as multiplicative spike on fee",
      "Dampened stacking (decayed + frac*spike): 1/4\u2192481, 1/3\u2192479, 1/2\u2192474, 2/3\u2192465",
      "More stacking = worse performance \u2014 confirms max(fresh, decayed) is optimal",
      "Stacking inflates fees during arb clusters but loses retail proportionally more",
      "The existing max(baseFee+spike, prevFee*decay) formula is provably better"
    ],
    "params": {
      "stacking_fractions": [
        "1/4",
        "1/3",
        "1/2",
        "2/3",
        "full additive"
      ],
      "base_fee_bps": 24,
      "decay_factor": "6/7"
    },
    "results": {
      "edge": 480.6,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-stacking",
      "additive",
      "dampened",
      "rejected"
    ]
  },
  {
    "id": 21,
    "name": "KInvariantTracking",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Tracking k-invariant (reserveX * reserveY) growth can provide a performance signal to adapt base fee \u2014 lower base when doing well to attract more retail",
    "variables_changed": [
      "k_tracking",
      "base_fee_formula"
    ],
    "verdict": "rejected",
    "insights": [
      "Edge exactly 482.17 \u2014 identical to baseline, zero effect",
      "k growth per trade is extremely small \u2014 adjustments are sub-1-bps",
      "10 bps max adjustment over 10k steps means ~1 bps effective change",
      "k-invariant is too slow-moving to provide useful intra-simulation signal",
      "The information in k growth is already captured by the spike mechanism"
    ],
    "params": {
      "k_growth_scaling": "1 bps base reduction per 0.1% k growth",
      "max_adjustment_bps": 10,
      "base_fee_bps": 24
    },
    "results": {
      "edge": 482.17,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "k-invariant",
      "reserve-tracking",
      "rejected"
    ]
  },
  {
    "id": 22,
    "name": "SignalVariants",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Alternative signals (reserve deviation, trade-size EMA, peak-adaptive decay, size-conditional decay, linear decay, lin/quad rebalance, lower base) can break past 482 edge",
    "variables_changed": [
      "base_fee_formula",
      "decay_structure",
      "spike_shape",
      "base_fee"
    ],
    "verdict": "rejected",
    "insights": [
      "Reserve deviation as base fee bonus: 479.94 at 500 sims — raises base too much, loses retail",
      "Reserve deviation for adaptive decay rate (6/7 vs 7/8): 482.16 at 500 sims — identical to baseline",
      "Peak-adaptive decay (slow decay after high spikes): 482.43 at 500 sims — within noise",
      "Trade-size EMA as dynamic floor: 393 at 100 sims — catastrophic, inflates base fee",
      "Size-conditional decay (fast for retail, slow for arb): 482.17 at 100 sims — zero effect, threshold rarely matters vs base clamp",
      "Linear decay (subtract 10bps/trade): 348 at 100 sims — keeps fee elevated too long, loses retail",
      "More quadratic, less linear (lin=1/2, quad=35): 478 at 100 sims — worse balance than 7/8+27",
      "Base=20 with same spike: 480 at 500 sims — confirms 24 is optimal base from exp 013",
      "CRITICAL INSIGHT: Fee returned by afterSwap is for NEXT trade. Arb sees decayed fee, retail sees post-arb spike. This is structurally backwards for edge optimization.",
      "CRITICAL INSIGHT: At 500bps spike, routing formula sends 0% retail to us. At 24bps base, ~57% of retail. Weighted average is 39.5%. The spike mechanism fundamentally trades retail volume for arb protection.",
      "CRITICAL INSIGHT: Fees go to SEPARATE bucket, not reserves. Both AMMs have ~identical reserves. Retail routing depends on fee AND reserves, but reserve difference is negligible.",
      "All 8 variants tested are incremental modifications to spike+decay paradigm. None break through. Need categorically different approach."
    ],
    "params": {
      "variants_tested": [
        "reserve_deviation_base_bonus",
        "reserve_deviation_adaptive_decay",
        "peak_adaptive_decay",
        "trade_size_ema_floor",
        "size_conditional_decay",
        "linear_decay",
        "high_quad_low_lin",
        "base_20"
      ],
      "base_fee_bps": "20-24",
      "n_variants": 8
    },
    "results": {
      "edge": 482.43,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "signal-variants",
      "reserve-deviation",
      "adaptive-decay",
      "ema-floor",
      "linear-decay",
      "rejected",
      "paradigm-exhausted"
    ]
  },
  {
    "id": 23,
    "name": "HighBaseExploration",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Winner has avg fee 36.1 bps with 77K retail and 23.8K arb. A higher base (28-40 bps) with retuned spikes could achieve this consistent fee profile.",
    "variables_changed": [
      "base_fee",
      "spike_coefficients",
      "decay_rate",
      "fee_floor",
      "fee_mechanism"
    ],
    "verdict": "rejected",
    "insights": [
      "4D grid search at 500 sims confirms base=24 is optimal: b24→482, b26→482, b28→481, b30→480, b33→480, b35→476, b38→480, b40→479",
      "At base=30, lin+quad coefficients were re-optimized: best combo (3/4, 30) gives 479 at 500 sims — still below b24 baseline",
      "At base=33, all spike combos are worse than base=30 and base=24",
      "Fast decay (5/6) at base=35 gives only 474 — consistency doesn't help when fee is above vanilla",
      "Floor at 31 bps (above vanilla): 481.76 at 500 sims — zero effect, fee rarely reaches 24 between arb events anyway",
      "Smooth EMA fee (α=1/4): 421 — too slow to react to arbs, inadequate protection",
      "Vol-proportional fee (sqrt of EMA variance): 413 — corrupted signal, same problem as exp 017",
      "CRITICAL: Higher base ALWAYS hurts at 500 sims despite looking better at 100. The spike mechanism is doing ALL the useful work.",
      "The winner's 36.1 avg fee and 77K retail is NOT achievable through higher base. Must use a fundamentally different mechanism.",
      "Winner likely uses reserve-preservation advantage: consistent above-30bps fee preserves k better → larger reserves → more retail from routing formula. But direct base raise doesn't work because it also loses retail per-trade."
    ],
    "params": {
      "base_sweep_500sims": "24→482, 26→482, 28→481, 30→480, 33→480, 35→476",
      "spike_sweep_base30": "best: lin=7/8,q=25→480 | lin=3/4,q=30→479 | lin=1/1,q=20→479",
      "spike_sweep_base33": "best: lin=3/4,q=30→484@100sims→~480@500sims",
      "decay_sweep_base30": "4/5→483, 5/6→485, 6/7→486, 7/8→485, 8/9→485, 9/10→483 (all 100 sims)",
      "floor_31bps": "481.76@500sims",
      "ema_fee": "421@100sims",
      "vol_proportional": "413@100sims"
    },
    "results": {
      "edge": 482.17,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "high-base",
      "grid-search",
      "4d-optimization",
      "fee-floor",
      "ema-fee",
      "vol-proportional",
      "rejected"
    ]
  },
  {
    "id": 24,
    "name": "BidAskAndSpikeCurves",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "Reserve-state bid/ask asymmetry or alternative spike curve shapes (saturating, hybrid, price-change) can break through 482",
    "variables_changed": [
      "bid_ask_asymmetry",
      "spike_shape",
      "spike_signal"
    ],
    "verdict": "rejected",
    "insights": [
      "Reserve-state bid/ask skew (5 bps at 10% dev): 481.96 at 500 sims — no improvement",
      "Stronger reserve skew (50 bps at 10% dev): 477.64 at 500 sims — hurts, confirms asymmetric fees don't help under GBM",
      "Saturating spike (Hill function, max 200 bps): 448 at 100 sims — too limited, same as cap problem",
      "Hybrid saturating bonus (+20 bps) on top of lin+quad: 479.72 at 500 sims — bonus inflates retail fee",
      "Price-change spike (spot price delta): 70 at 100 sims — catastrophic, confirms price signals are corrupted",
      "Partial stacking (1/4 decayed excess added to fresh): 481.68 at 500 sims — within noise",
      "Key insight: if winner's avg fee 36.1 is volume-weighted, then arb sees ~72 bps and retail sees ~25 bps — similar to our mechanism but winner loses less retail during spikes"
    ],
    "params": {
      "reserve_skew_scaling": ["1/200 (5bps at 10%)", "1/20 (50bps at 10%)"],
      "saturating_max_bps": 200,
      "hybrid_bonus_bps": 20,
      "partial_stack_frac": "1/4"
    },
    "results": {
      "edge": 481.96,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "bid-ask",
      "reserve-skew",
      "saturating",
      "price-change",
      "partial-stack",
      "rejected"
    ]
  },
  {
    "id": 25,
    "name": "DirContrarian",
    "parent_id": 13,
    "date": "2026-02-10",
    "hypothesis": "After a trade in direction D, spiking only the OPPOSITE direction's fee (contrarian) while decaying the same direction should (1) capture more retail by keeping one side low, and (2) provide partial arb protection since GBM direction is random. Router uses bid_fee for sells and ask_fee for buys separately.",
    "variables_changed": [
      "fee_asymmetry",
      "spike_direction",
      "linear_coefficient",
      "quadratic_coefficient",
      "decay_rate"
    ],
    "verdict": "confirmed",
    "insights": [
      "BREAKTHROUGH: Contrarian directional spike achieves 496.84@500sims vs 482.17 baseline — 15 point improvement",
      "Router uses bid_fee and ask_fee SEPARATELY for different trade directions — this is exploitable",
      "Pure contrarian (spike opposite only, decay same) beats any partial hybrid (same=10%: 496.3, same=25%: 494.7, same=50%: 490.9)",
      "Same-direction spike (DirSplit) is TERRIBLE (301@100sims) — spikes the fee retail uses, not arb",
      "DirContrarian prefers STRONGER linear (5/4 vs 7/8) and WEAKER quadratic (15 vs 27) than symmetric baseline",
      "DirContrarian prefers SLOWER decay (8/9 vs 6/7) — opposite-direction spike needs to persist longer",
      "Optimal params: base=24, lin=5/4, quad=15, decay=8/9 — but q14-18 and l1.1-1.3 all within noise at 496-497",
      "Base fee still optimal at 24 across all DirContrarian variants",
      "Failed timing approaches: TimingSwitch (324@100), TimingSwitchV2 (399@100) — binary arb/retail detection too noisy",
      "Failed paradigm shifts: SigmaAdaptBase (480@500), TwoPhase (480@500), SigmaFee (478@500), ReserveRatioFee (80@100)"
    ],
    "params": {
      "base_fee_bps": 24,
      "linear_coefficient": "5/4",
      "quadratic_coefficient": 15,
      "decay_factor": "8/9",
      "spike_direction": "opposite (contrarian)",
      "same_direction": "decay only"
    },
    "results": {
      "edge": 496.84,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "bid-ask-asymmetry",
      "directional",
      "contrarian",
      "paradigm-shift",
      "new-best",
      "confirmed"
    ]
  },
  {
    "id": 26,
    "name": "DirContrarian-Enhancements",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Enhancing DirContrarian with timing detection, asymmetric base/decay, sigma adaptation, spot-price tracking, reserve scaling, directional coefficients, or size-based switching could push past 497.",
    "variables_changed": [
      "timing_detection",
      "asymmetric_base",
      "asymmetric_decay",
      "sigma_adaptation",
      "spike_strength",
      "spike_formula",
      "same_side_treatment",
      "spot_price_tracking"
    ],
    "verdict": "rejected",
    "insights": [
      "DirContrarian at 497 is a robust local optimum — 30+ enhancement variants tested, NONE beat it at 500 sims",
      "Timing-based arb detection STILL fails with DirContrarian (407-449 edge) — dropping both fees after arb loses contrarian protection",
      "Asymmetric decay (9/10 opposite, 6/7 same) is within noise (497.04 vs 496.84)",
      "X-ratio, max-ratio, geometric-mean all equivalent to Y-ratio under CPMM (established fact confirmed)",
      "Same-side base lower than 24 (18 or 0) does not help — marginal retail gain is offset",
      "Same-side reset to baseFee (instead of decay) catastrophic (390) — continuity matters",
      "Stronger spikes (2x) catastrophic (381), weaker (0.5x) bad (463) — current coefficients optimal",
      "Sticky hold (no same-side decay) catastrophic (389) — same-side must decay to attract retail",
      "Spot-price change as spike bonus: catastrophic (133) — corrupted as always",
      "Cumulative per-step trade ratio: no improvement (496.3)",
      "Consecutive same-direction arb tracking: no improvement (494.1)",
      "Direction-specific spike coefficients: no improvement (495.5)",
      "Pure linear spike with contrarian: slightly worse (495.3 vs 496.8)",
      "Size-based contrarian (large=contrarian, small=symmetric): worse (498.5@100→?)",
      "Large-only contrarian (skip small trades): slightly worse (495.2)",
      "Cubic spike with contrarian: catastrophic (403)",
      "Floor spike at 30bps (above vanilla): no improvement (496.6)",
      "Reserve-ratio scaling: catastrophic (194)"
    ],
    "params": {
      "n_variants_tested": "30+",
      "best_enhancement": "asymmetric_decay at 497.04 (within noise)"
    },
    "results": {
      "edge": 496.84,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "enhancement",
      "timing",
      "asymmetric",
      "spot-price",
      "rejected"
    ]
  },
  {
    "id": 27,
    "name": "ModerateContrarian",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Capping the opposite spike at a moderate level or using two-level base fees (different floor for same vs opposite side) might retain more retail from both directions while maintaining arb protection",
    "variables_changed": [
      "spike_cap",
      "two_level_base"
    ],
    "verdict": "rejected",
    "insights": [
      "Spike caps devastate performance: Cap50→380, Cap100→426, Cap200→462, Cap500→489 — confirms exp016 finding even in DirContrarian context",
      "Two-level base floors (different sameBase vs oppBase) don't help: TL20_30→494, TL22_30→494, TL24_30→494, all worse than single base=24",
      "Higher opposite base (35-40 bps) actively hurts: TL20_35→491, TL24_40→488 — the opposite side needs to decay to 24 bps to attract retail",
      "Asymmetric base floors between same-side and opposite-side are strictly worse",
      "Alternative spike params in two-level structure (more quad, less lin) don't help: TL20_30_l1q20→493",
      "Faster decay (6/7) in two-level structure doesn't help: TL20_35_d67→492",
      "Unbounded spikes remain essential — even Cap500 loses 8 edge points vs uncapped"
    ],
    "params": {
      "configs_tested": 15,
      "cap_values": [50, 100, 200, 500],
      "two_level_combos": "same_base=[18,20,22,24], opp_base=[30,35,36,40]"
    },
    "results": {
      "edge": 496.84,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": [
      "spike-cap",
      "two-level",
      "base-fee",
      "rejected"
    ]
  },
  {
    "id": 28,
    "name": "RetailFeeOptimization",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Higher effective retail fee (36 bps matching winner) with DirContrarian or size-dependent decay could capture more revenue per retail trade",
    "variables_changed": [
      "base_fee",
      "size_dependent_decay",
      "same_side_floor",
      "step_awareness"
    ],
    "verdict": "rejected",
    "insights": [
      "Constant 36 bps: 362 edge — no spike protection is catastrophic",
      "DC base30: 493.72@500 — worse than base24 (496.84)",
      "DC base36: 495.92@100 — monotonically declining with higher base",
      "Size-dependent decay (arb→fast decay, retail→slow): 471-472 — breaks arb protection",
      "Same-side floor at 30/36 bps: 496-502@100 → 496.18@500 — within noise",
      "Step-aware switching (arb phase vs retail phase): 409 — doesn't work",
      "Both-sides bump (same side to 36): 500@100 — worse",
      "Symmetric spike at 36 base: 475 — much worse than DC"
    ],
    "params": {
      "n_variants_tested": 12,
      "winner_avg_fee": "36.1 bps"
    },
    "results": {
      "edge": 496.84,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["base-fee", "retail-optimization", "size-dependent", "rejected"]
  },
  {
    "id": 29,
    "name": "KPreservationBaseScan",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Routing advantage comes from k-preservation (not fee level). Higher base might preserve k better despite slightly less retail routing from fee difference.",
    "variables_changed": [
      "base_fee_scan"
    ],
    "verdict": "rejected",
    "insights": [
      "DC base scan at 100 sims: 20→502.8, 22→503.2, 24→502.9, 26→502.3, 28→501.3, 30→500.0, 32→498.7, 34→497.3, 36→495.9, 40→492.9",
      "Edge MONOTONICALLY DECLINES with higher base — no hidden optimum above 24",
      "Symmetric spike always ~18 points worse than DC at same base (485 vs 503 at base 24)",
      "DC_match30 (same side always 30 bps): 403 — our advantage IS the lower same-side fee",
      "DC_noMemSame (always reset same to base): 390 — decay memory on same side is critical",
      "Fee-level routing advantage at 24 vs 30 bps is only 0.015% — k preservation dominates routing"
    ],
    "params": {
      "bases_tested": [20, 22, 24, 26, 28, 30, 32, 34, 36, 40]
    },
    "results": {
      "edge": 496.84,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["base-fee", "k-preservation", "routing", "rejected"]
  },
  {
    "id": 30,
    "name": "NewParadigmSearch",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "A fundamentally different fee mechanism (oscillating, predictive, accumulator, delayed, reverse-decay) could break the DirContrarian local optimum",
    "variables_changed": [
      "fee_mechanism"
    ],
    "verdict": "rejected",
    "insights": [
      "Oscillating fee (toggle spike/no-spike): 430 — loses arb protection half the time",
      "Inverse prediction (low after arb, spike after retail): 346 — no arb protection for next step",
      "Accumulator (EMA threat level): 301 — fees stay elevated, lose retail",
      "Delayed contrarian (buffer spike for next trade): 345 — next step arb faces unprotected fee",
      "High default + drop after arb: 342 — loses all retail between arbs",
      "Reverse decay (increase between arbs): 343 — same problem",
      "Size-weighted decay (faster after arb, slower after retail): 494 — within noise",
      "Dual spike (10% on same side): 502@100 — hybrid already tested, no help",
      "Same-side micro boost (26 bps floor): 503@100 — marginal, not significant"
    ],
    "params": {
      "n_paradigms_tested": 10
    },
    "results": {
      "edge": 496.84,
      "win_rate": null,
      "n_simulations": 500,
      "retail_volume_share": null
    },
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["paradigm-search", "oscillating", "predictive", "accumulator", "delayed", "rejected"]
  },
  {
    "id": 31,
    "name": "OptimalRetailFee",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Revenue = share × fee is maximized around 36 bps. Constant fee at optimal point, symmetric spike at higher base, or asymmetric same-side bump could improve.",
    "variables_changed": ["constant_fee", "symmetric_base", "same_side_bump"],
    "verdict": "rejected",
    "insights": [
      "Constant fee landscape: monotonically increasing 28→346, 50→380, 75→392. Optimal fixed ~75-80 bps (confirms exp004)",
      "Symmetric spike at base 30 with various spike params: 473-481, all worse than DC 503",
      "DC at low bases (16-22): 500-503, same as base 24 within noise",
      "Asymmetric same-side bump (constant 2-4 bps): within noise of baseline",
      "Proportional same-side spike (1/8 to 1/2 of opposite): gets worse with higher fraction (confirming exp025)",
      "Revenue per order IS maximized at ~36 bps, but routing loss outweighs revenue gain in practice",
      "The DirContrarian advantage over symmetric is entirely from post-arb retail capture"
    ],
    "params": {"constant_fees_tested": [28,30,32,33,34,35,36,38,40,50,60,75]},
    "results": {"edge": 496.84, "win_rate": null, "n_simulations": 500},
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["retail-fee", "constant-fee", "symmetric", "rejected"]
  },
  {
    "id": 32,
    "name": "AlternativeSpikeFormulas",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Different spike functional forms (pure quadratic, pure linear, geometric mean, reserve-based) or decay rates could improve DirContrarian",
    "variables_changed": ["spike_formula", "decay_rate"],
    "verdict": "rejected",
    "insights": [
      "Pure quadratic spike: 410 — needs linear component for small trades",
      "Pure linear spike: 485 — needs quadratic for large trade protection",
      "Fast decay (2/3): 477 — spike doesn't persist long enough between steps",
      "Bigger spike + faster decay: 392 — over-spikes too much",
      "Geometric mean of X/Y trade ratios: 323 — Y-only ratio is correct",
      "Reserve deviation scaling: 496 — no improvement",
      "Slow decay (9/10): 502 — same as 8/9 within noise",
      "Asymmetric decay (fast same, slow opposite): 503 — same as uniform within noise",
      "Spike persistence via max(current, decayed_previous): 493 — too persistent",
      "Current lin+quad spike formula is well-optimized for DirContrarian"
    ],
    "params": {"n_formulas_tested": 9},
    "results": {"edge": 496.84, "win_rate": null, "n_simulations": 500},
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["spike-formula", "decay-rate", "rejected"]
  },
  {
    "id": 33,
    "name": "InferredVolGrid",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Vol-adaptive base, ultra-low base, split decay, or 70/30 hybrid could improve. Symmetric grid with different params might also work.",
    "variables_changed": ["vol_adaptive", "ultra_low_base", "decay_split", "symmetric_grid"],
    "verdict": "rejected",
    "insights": [
      "Vol-adaptive base (EMA of returns): 494 — adds noise, slightly worse",
      "Ultra-low base 15 bps: 499 — more retail but worse arb protection, net wash",
      "Split decay (fast same 6/7, slow opp 14/15): 503 — within noise",
      "70/30 split (30% same spike): 487 — confirmed any same-side spike hurts",
      "Half contrarian (50% same spike): 497 — also within noise/worse",
      "Symmetric grid exhausted: best symmetric=488, always ~15 pts behind DC"
    ],
    "params": {"n_variants_tested": 14},
    "results": {"edge": 496.84, "win_rate": null, "n_simulations": 500},
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["vol-adaptive", "decay-split", "symmetric-grid", "rejected"]
  },
  {
    "id": 34,
    "name": "NoMemoryUpdateRules",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Alternative fee update rules (no memory, blend, additive, fresh-only, replace) could break the max(fresh, decayed) paradigm",
    "variables_changed": ["update_rule"],
    "verdict": "rejected",
    "insights": [
      "No memory (pure fresh): 382 — catastrophic, no persistence between steps",
      "50/50 blend of fresh and decayed: 456 — averaging reduces both spike and persistence",
      "Fresh same-side: 355 — same side spikes after arb, terrible for retail",
      "Additive (decayed + spike): 488 — decent but max() is better",
      "Replace (always fresh, no decay): 382 — same as no memory",
      "Symmetric moderate (base=36, weak spike, slow decay): 445 — inferior symmetric",
      "Direction counting (boost spike on consecutive same-dir): 462 — adds complexity, worse",
      "FUNDAMENTAL: max(fresh, decayed) IS the optimal update rule. Persistence between steps is essential. The 8/9 decay rate is well-calibrated."
    ],
    "params": {"n_rules_tested": 8},
    "results": {"edge": 496.84, "win_rate": null, "n_simulations": 500},
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["update-rule", "no-memory", "additive", "rejected"]
  },
  {
    "id": 35,
    "name": "SizeDiscriminateSpike",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Size-threshold spike (only spike on arb-sized trades) could improve retail capture without hurting arb protection",
    "variables_changed": ["size_threshold", "two_tier", "fast_retail_decay", "same_side_bump"],
    "verdict": "rejected",
    "insights": [
      "Small thresholds (0.1-0.2%) equivalent to baseline — can't distinguish arb from retail",
      "Large thresholds (0.5-1%) miss small arbs — catastrophic (442-484)",
      "Higher base + arb-only spike (base=28-30): 502-503, within noise",
      "Fast post-retail decay (2/3, 3/4): 482-493, breaks arb protection",
      "Same-side small bump (1/8, 1/4 of spike): 500-502, within noise",
      "X-based trade ratio (amountX/reserveX): 503, equivalent to Y-based",
      "Regime detection (large trade counter): 497, adds complexity without benefit"
    ],
    "params": {"n_variants_tested": 18},
    "results": {"edge": 496.84, "win_rate": null, "n_simulations": 500},
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["size-threshold", "two-tier", "arb-detection", "rejected"]
  },
  {
    "id": 36,
    "name": "ComprehensiveParamGrid",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "4D grid search (base × linear × quadratic × decay) might find a better local optimum than sequential tuning",
    "variables_changed": ["base", "linear_coef", "quadratic_coef", "decay_rate"],
    "verdict": "rejected",
    "insights": [
      "Phase 1 (lin×quad, 49 combos): top 10 all within 491.1-491.7 at 50 sims — extremely flat",
      "Best lin/quad confirmed: lin=5/4, quad=15 (current params)",
      "Phase 2 (decay sweep): 7/8 and 8/9 tied at top (491.7-491.8)",
      "Phase 3 (base sweep): base 22-25 all within 491.6-491.9 — flat plateau",
      "500-sim validation: best combo (b23/l5d4/q15/d7_8) = 497.11 vs current 496.84",
      "CONCLUSION: current params are at a global optimum within the DC framework. The 4D landscape is very flat near the peak."
    ],
    "params": {"grid_size": "49+13+9=71 combos at 50 sims"},
    "results": {"edge": 497.11, "win_rate": null, "n_simulations": 500},
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["grid-search", "parameter-optimization", "rejected"]
  },
  {
    "id": 37,
    "name": "TwoStateNovel",
    "parent_id": 25,
    "date": "2026-02-11",
    "hypothesis": "Novel mechanisms: timestamp-aware decay, within-step no-respike, reserve-deviation, bid premium, proportional same-side, multiplicative spike",
    "variables_changed": ["timestamp_decay", "no_respike", "reserve_deviation", "bid_premium", "spike_formula"],
    "verdict": "rejected",
    "insights": [
      "Timestamp-aware decay (per-step not per-trade): 499.65, slightly worse",
      "No within-step respike: 504.91, within noise but interesting direction",
      "Reserve deviation bonus: 299.67, catastrophic as always",
      "Bid premium (same-side +3 bps): 502.8, within noise",
      "Proportional same-side (spike/10, /20, /5): 501-502, within noise (also tested in exp 033)",
      "Multiplicative spike (base × (1+50×tr)): 351.25, too weak for large trades"
    ],
    "params": {"n_variants_tested": 9},
    "results": {"edge": 496.84, "win_rate": null, "n_simulations": 500},
    "sim_config": "baseline_default",
    "git_hash": null,
    "tags": ["timestamp-decay", "no-respike", "multiplicative", "rejected"]
  }
]
